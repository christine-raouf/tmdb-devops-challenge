# TMDB DevOps Challenge

## Overview

This project deploys an Nginx server inside a Docker container on an AWS EC2 instance using Terraform. The instance is configured to allow HTTP and HTTPS traffic and includes the necessary configurations to clone and serve content from a specified GitHub repository.

## Prerequisites

- Terraform installed on your local machine.
- AWS CLI configured with appropriate credentials.
- An SSH key pair generated for accessing the EC2 instance.

## Repository Structure

.
├── keys
│ ├── tmdb_key # Private key for SSH access
│ └── tmdb_key.pub # Public key for SSH access
├── tmdb-iac.tf # Terraform configuration file
├── variables.tf # Terraform variables file
└── README.md # This file



## Setup Instructions

### Step 1: Clone the Repository

Clone the repository to your local machine:

```bash
git clone https://github.com/your-username/tmdb-devops-challenge.git
cd tmdb-devops-challenge
Step 2: Configure SSH Keys
Ensure that your SSH keys are in the keys directory. The private key should be named tmdb_key, and the public key should be named tmdb_key.pub.

Step 3: Initialize Terraform
Initialize Terraform to install the necessary plugins:


terraform init
Step 4: Apply Terraform Configuration
Apply the Terraform configuration to provision the infrastructure:

terraform apply
During the apply process, Terraform will prompt you to confirm the changes. Type yes to proceed.

Step 5: Access the Deployed Application
Once the Terraform apply completes, note the public IP address of the EC2 instance from the output. You can access the Nginx server by navigating to the public IP address in your web browser:


http://<instance_ip>
Step 6: Connect to the EC2 Instance
To connect to the EC2 instance via SSH, use the following command:


ssh -i keys/tmdb_key ec2-user@<instance_ip>
Step 7: Verify Nginx and Docker Setup
On the EC2 instance, you can verify the setup by checking the status of Docker and Nginx:


# Check Docker status
sudo systemctl status docker

# Check Nginx status
sudo systemctl status nginx
You can also check the logs generated by the user data script:


cat /tmp/user-data.log
Security Group Configuration
The security group attached to the EC2 instance allows inbound traffic on the following ports:

22: SSH access
80: HTTP access
443: HTTPS access
Provisioning Details
The Terraform configuration performs the following steps:

Set up an AWS EC2 Instance:

Use the Amazon Linux 2023 AMI.
Assign a key pair for SSH access.
Attach a security group that allows SSH, HTTP, and HTTPS traffic.
Install and Configure Docker and Nginx:

Install Docker, Nginx, and Git.
Start and enable Docker and Nginx services.
Clone the specified GitHub repository.
Copy the nginx.conf file from the repository to the Nginx configuration directory (if it exists).
Restart the Nginx service if the configuration file is updated.
Run Nginx inside a Docker Container:

Stop the host's Nginx service to free up port 80.
Run an Nginx container and map port 80 to the host.
Clone the specified GitHub repository inside the container.