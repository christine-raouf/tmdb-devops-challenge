---
- name: Ensure Python is installed
  hosts: all
  gather_facts: no
  become: yes
  tasks:
    - name: Check if yum is available
      raw: which yum
      register: yum_check
      ignore_errors: yes

    - name: Check if apt-get is available
      raw: which apt-get
      register: apt_check
      ignore_errors: yes

    - name: Install Python 3 on RedHat-based systems
      raw: sudo yum install -y python3
      when: yum_check.rc == 0

    - name: Install Python 3 on Debian-based systems
      raw: sudo apt-get update && sudo apt-get install -y python3
      when: apt_check.rc == 0

    - name: Create symlink for Python 3 on RedHat-based systems
      raw: sudo ln -s /usr/bin/python3 /usr/bin/python
      when: yum_check.rc == 0

    - name: Create symlink for Python 3 on Debian-based systems
      raw: sudo ln -s /usr/bin/python3 /usr/bin/python
      when: apt_check.rc == 0
